<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TabMaster Pro - Test Runner</title>
  <link rel="stylesheet" href="test-panel.css">
</head>
<body>
  <div class="test-panel">
    <header class="panel-header">
      <h1>Test Runner</h1>
      <div class="header-actions">
        <button id="toggleTestMode" class="btn-toggle" title="Toggle test mode">
          <span class="toggle-icon">⚡</span>
        </button>
      </div>
    </header>

    <div class="test-status" id="testStatus">
      <div class="status-indicator inactive">
        <span class="status-icon">●</span>
        <span class="status-text">Test Mode Inactive</span>
      </div>
    </div>

    <div class="engine-selector">
      <label for="engineSelect">Rules Engine:</label>
      <select id="engineSelect" class="engine-select">
        <option value="v2-services" selected>v2 Services (Production - 383 lines)</option>
      </select>
      <span id="engineStatus" class="engine-status">✅ Ready</span>
    </div>

    <div class="test-controls">
      <button id="runAllTests" class="btn btn-primary" disabled>
        <span class="btn-icon">▶</span> Run All Tests
      </button>
      <button id="runSelectedTest" class="btn btn-secondary" disabled>
        <span class="btn-icon">▶</span> Run Selected
      </button>
      <button id="stopTests" class="btn btn-danger" disabled>
        <span class="btn-icon">■</span> Stop
      </button>
    </div>

    <div class="scenario-list">
      <h2>Test Scenarios</h2>
      <div class="scenarios" id="scenarioList">
        <!-- Scenarios will be loaded dynamically -->
        <div class="loading-message" style="padding: 20px; text-align: center; color: #666;">
          <em>Activate test mode to load available scenarios...</em>
        </div>
      </div>
    </div>

    <div class="test-progress" id="testProgress" style="display: none;">
      <h3>Test Progress</h3>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text" id="progressText">0 / 0</div>
    </div>

    <div class="test-results" id="testResults" style="display: none;">
      <h3>Test Results</h3>
      <div class="results-summary" id="resultsSummary"></div>
      <div class="results-details" id="resultsDetails"></div>
    </div>

    <div class="test-logs">
      <h3>Test Logs</h3>
      <div class="log-controls">
        <select id="logLevel" class="log-filter">
          <option value="all">All Logs</option>
          <option value="info">Info</option>
          <option value="warning">Warning</option>
          <option value="error">Error</option>
        </select>
        <button id="clearLogs" class="btn btn-small">Clear</button>
        <button id="downloadLogs" class="btn btn-small">Download</button>
        <button id="copyAllLogs" class="btn btn-small">Copy All Logs</button>
      </div>
      <div class="log-content" id="logContent"></div>
    </div>
  </div>

  <script type="module" src="test-panel.js"></script>
</body>
</html>